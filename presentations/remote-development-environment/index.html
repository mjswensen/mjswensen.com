---
title: How to set up a powerful remote development environment that's as comfortable as localhost
type: presentation
description: Advantages, tradeoffs, and tips for architecting the perfect remote development environment, as well as a sneak peek at GitHub's new Codespaces feature.
date: 2021-10-08 11:20:00 MDT
for: UtahJS 2021
at: Slopes EVNTS Center
location: Draper, UT
videoUrl: "https://youtu.be/zivPD-LL57k"
---
<!DOCTYPE html>
<html lang="en">
<head>
  <title>How to set up a powerful remote development environment that's as comfortable as localhost</title>
  <meta name="description" content="{{ page.description }}">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="{{ site.baseurl }}/favicon.png">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="impress"
    data-width="1920"
    data-height="1080"
    data-max-scale="2"
  >

    <!-- Title -->

    <!-- 
      Just to be sure we're all on the same page: when I say "remote
      development environment" I mean that rather than doing your day-to-day
      work on your laptop, you do most or all of your work while connected to
      some hardware that's running in the cloud.
     -->
    <div
      id="title"
      class="step"
      data-x="0"
      data-y="0"
      data-scale="1"
    >
      <h1>{{ page.title }}</h1>
    </div>

    <!-- Advantages -->

    <!-- 
      Before we dive into the specifics of setting up a remote development
      environment, let's provide some context as to why one might want to do
      that and what the benefits and tradeoffs are.
     -->
    <div
      id="advantages"
      class="step slide"
      data-x="-1706"
      data-y="1761"
      data-scale="2"
    >
      <h2>Advantages</h2>
    </div>

    <!-- 
      Not all of the applications we build today fit nicely into the 15"-
      MacBook-Pro-with-16GB-of-RAM box. We may need extra GPU power for machine
      learning, or any number of other use cases. Remote environments allow you
      to pick just the right hardware for the job and even change it from time
      to time depending on what you are working on. For example: I was working
      on a database migration and ran out of disk space making backups, so with
      a few clicks in AWS Console I added another half terabyte of storage to
      give myself a bit of wiggle room. You can't do that with a laptop as
      easily.
     -->
    <div
      id="specialized-hardware"
      class="step sub-slide"
      data-x="-2850"
      data-y="1400"
    >
      <img
        alt="arrow pointing from laptop to server rack"
        src="images/hardware.svg"
      />
      <span class="caption">Specialized hardware / flexibility</span>
    </div>

    <!-- 
      Benefits from the employer's perspective: intellectual property like
      source code and user data can remain un company infrastructure while
      offering additional flexibility and choice to employees for their daily
      workstation.
     -->
    <div
      id="security"
      class="step sub-slide"
      data-rel-x="0"
      data-rel-y="800"
    >
      <img
        alt="locked lock"
        src="images/security.svg"
      />
      <span class="caption">Security / intellectual property</span>
    </div>

    <!-- 
      One of the hallmark benefits of in-office working is the ability to tap
      a teammate on the shoulder and have them review the work on your laptop
      and collaborate on designs or solutions to problems. With the pandemic
      causing many of us to work remotely, some of this benefit has been lost.
     -->
    <div
      id="co-location-office"
      class="step sub-slide"
      data-rel-x="1500"
      data-rel-y="-800"
    >
      <img
        alt="three co-located people with laptops"
        src="images/co-location-office.svg"
      />
      <span class="caption">Office</span>
    </div>

    <!-- 
      Remote dev environments bring some of the collaborative properties back,
      because you can point co-workers to a URL on your remote machine and ask
      for feedback.
     -->
    <div
      id="co-location-remote"
      class="step sub-slide"
      data-rel-x="750"
      data-rel-y="0"
    >
      <img
        alt="three distributed people with co-located servers"
        src="images/co-location-remote.svg"
      />
      <span class="caption">Remote</span>
    </div>

    <!-- 
      When I set up remote environments for my teammates at Rivet, one of the
      first benefits they see is increased performance for network operations.
      In a traditional setup, your `yarn install`s and `git` operations have to
      make the journey from the internet all the way to your laptop.
     -->
    <div
      id="network-laptop"
      class="step sub-slide"
      data-rel-x="-750"
      data-rel-y="800"
    >
      <img
        alt="laptop connecting to three servers"
        src="images/network-laptop.svg"
      />
      <span class="caption">Local environment</span>
    </div>

    <!-- 
      When you co-locate your environment with the rest of the internet, those
      operations become very fast. Only a small amount of data (your terminal
      session) is streamed down to your laptop.
     -->
    <div
      id="network-remote-env"
      class="step sub-slide"
      data-rel-x="850"
      data-rel-y="0"
    >
      <img
        alt="laptop connecting to one server connecting to three servers"
        src="images/network-remote-env.svg"
      />
      <span class="caption">Remote environment</span>
    </div>

    <!-- Tradeoffs -->

    <!-- 
      No solution is a silver bullet; let's talk about some of the tradeoffs.
     -->
    <div
      id="tradeoffs"
      class="step slide"
      data-x="1903"
      data-y="2196"
      data-scale="1.5"
    >
      <h2>Tradeoffs</h2>
    </div>

    <!-- 
      Since this is a relatively new trend, our favorite tools are still
      evolving to provide adequate support for a remote setup. VS Code has
      strong support with its new suite Remote Development extensions. This
      link points to a Twitter exchange between an engineer wanting to use
      PhpStorm in a remote development context. The best answer they have
      for now is to use X forwarding or VNC or similar to stream the UI pixels
      to your local machine, which is likely not going to yield a great
      experience. The maturity of the tools is paramount.

      Note also that this presentation is available online at mjswensen.com
      if you want to revisit the slides and any of the links, etc.
     -->
    <div
      id="tooling"
      class="step sub-slide"
      data-x="1100"
      data-y="1950"
      data-scale="0.75"
    >
      <img
        alt="sketch of VS Code UI"
        src="images/tooling.svg"
      />
      <span class="caption"><a href="https://twitter.com/fideloper/status/1339363397524176896" target="_blank">Nascent tooling</a></span>
    </div>

    <!-- 
      Local development environments are relatively simple; remote environments
      bring additional considerations around networking, security, DNS, etc.
     -->
    <div
      id="complexity"
      class="step sub-slide"
      data-rel-x="0"
      data-rel-y="650"
      data-scale="0.75"
    >
      <img
        alt="boxes with chaotic lines"
        src="images/complexity.svg"
      />
      <span class="caption">Additional complexity</span>
    </div>

    <!-- 
      I don't think there are too many shops that try to maintain an offline-
      capable developer experience, but that obviously goes out the window with
      remote development environments.
     -->
    <div
      id="offline"
      class="step sub-slide"
      data-rel-x="1400"
      data-rel-y="-650"
      data-scale="0.75"
    >
      <img
        alt="computer disconnected from the internet"
        src="images/offline.svg"
      />
      <span class="caption">Offline development</span>
    </div>

    <!-- 
      We've been developing locally for a long time and change comes with friction.
     -->
    <div
      id="change"
      class="step sub-slide"
      data-rel-x="0"
      data-rel-y="650"
      data-scale="0.75"
    >
      <img
        alt="delta symbol"
        src="images/change.svg"
      />
      <span class="caption">Change is hard</span>
    </div>

    <!-- Architecture -->

    <!-- 
      OK, so now let's talk about some practical tips for setting up a remote
      development environment.
     -->
    <div
      id="architecture"
      class="step slide"
      data-x="0"
      data-y="4813"
      data-scale="3"
    >
      <h2>Architecture</h2>
    </div>

    <!-- 
      I'll show two high-level examples that really actually represent a
      spectrum of possibilities.
     -->
    <div
      id="hybrid"
      class="step sub-slide text"
      data-rel-x="-1500"
      data-rel-y="-650"
      data-scale="1.5"
    >
      <h3 class="title">Hybrid option</h3>
      <div>
        <h4>Local</h4>
        <ul>
          <li>Editor</li>
          <li>Git</li>
          <li>Repository</li>
          <li>Synchronization software (unison, rsync, etc.)</li>
          <li>Browser</li>
          <li>VPN client</li>
        </ul>
      </div>
      <div>
        <h4>Remote</h4>
        <ul>
          <li>Synchronization software</li>
          <li>Runtime dependencies (docker, etc.)</li>
          <li>Build tools</li>
        </ul>
      </div>
    </div>

    <!-- 
      This approach is recommended for its simplicity. It also allows for
      maximizing the network performance and security benefits mentioned
      previously.
     -->
    <div
      id="fully-remote"
      class="step sub-slide text"
      data-rel-x="0"
      data-rel-y="700"
      data-scale="1.5"
    >
      <h3 class="title">Fully remote option</h3>
      <div>
        <h4>Local</h4>
        <ul>
          <li>Editor client (VS Code, terminal, etc.)</li>
          <li>Browser</li>
          <li>VPN client</li>
        </ul>
      </div>
      <div>
        <h4>Remote</h4>
        <ul>
          <li>Git</li>
          <li>Repository</li>
          <li>Runtime dependencies</li>
          <li>Build tools</li>
        </ul>
      </div>
    </div>

    <!-- 
      If your machine is directly accessible via the internet, you'll have to
      spend time securing it and allowlisting ports, etc. A better approach is
      to create a VPC in the cloud that is protected by NAT, etc. in the same
      way that your home or office network is. Then you add a VPN endpoint on
      that network that allows you to connect to your environment as one "peer"
      to another. That way you can open up debugging ports, expose your
      database to GUI clients, etc. without worrying about intruders.
     -->
    <div
      id="vpn"
      class="step sub-slide"
      data-rel-x="3000"
      data-rel-y="-700"
      data-scale="1.5"
    >
      <img
        alt="computer connecting to private network via VPN"
        src="images/vpn.svg"
      />
      <span class="caption">VPN configuration</span>
    </div>

    <!-- 
      Using a managed VPN service will give you added reliability and reduces
      the number of things you have to maintain. Since the VPN becomes a
      critical piece of engineering daily workflow, you want it to be solid.
      Also, set up split tunnelling on your VPN service. That way only traffic
      to a particular block of IP addresses goes through the VPN, and the rest
      goes directly to the internet. This helps performance, especially for
      peer-to-peer connections like video calls. More on that here:
      https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/split-tunnel-vpn.html
      Finally, you can add a DNS record that points a domain to your private IP
      address. You won't be able to resolve it unless you are connected to the
      VPN, and it's a nice convenience for connecting to your remote machine.
     -->
    <div
      id="vpn-tips"
      class="step sub-slide text"
      data-rel-x="0"
      data-rel-y="1300"
      data-scale="1.5"
    >
      <h3 class="title">VPN tips</h3>
      <ul>
        <li>Use a managed VPN service</li>
        <li>Split traffic for performance</li>
        <li>Point a domain to your private IP</li>
      </ul>
      <img
        src="images/vpn-split-traffic.svg"
        alt="Computer with split internet traffic between VPN and internet"
      />
    </div>

    <!-- 
      Once you've got all that set up, you connect to the VPN, connect to your
      machine via SSH, and you're all set.
     -->
    <div
      id="workflow"
      class="step sub-slide text"
      data-rel-x="-1500"
      data-rel-y="700"
    >
      <h3 class="title">Workflow</h3>
      <ol>
        <li>Connect to the VPN</li>
        <li>Connect to your machine via SSH</li>
        <li>Profit</li>
      </ol>
    </div>

    <!-- 
      Here's what my setup process looks like in the morning. It's not too
      different from a local setup. Because of VS Code's client-server
      architecture, even features like remote debugging of server processes or
      browser JavaScript work great.
     -->
    <div
      id="rviet-demo"
      class="step sub-slide"
      data-rel-x="0"
      data-rel-y="900"
      data-scale="0.75"
    >
      <video
        width="1920"
        height="1080"
        controls
        preload
      >
        <source src="videos/rivet.webm" type="video/webm">
        <source src="videos/rivet.mp4" type="video/mp4">
      </video>
    </div>

    <!-- Alternatives -->

    <!-- 
      There are of course commercial alternatives to setting this all up
      yourself. Coder.com are the folks behind the popular VS Code server
      docker container. GitHub also released their new Codespaces feature
      for GitHub teams just in the last few weeks.
     -->
    <div
      id="alternatives"
      class="step slide"
      data-x="3611"
      data-y="5310"
      data-rotate-z="-90"
    >
      <h2>Alternatives</h2>
      <ul>
        <li><a href="https://coder.com/" target="_blank">Coder.com</a></li>
        <li><a href="https://www.gitpod.io/" target="_blank">Gitpod.com</a></li>
        <li><a href="https://github.com/features/codespaces" target="_blank">GitHub Codespaces</a></li>
        <li>(etc.)</li>
      </ul>
    </div>

    <!-- 
      I wanted to see what Codespaces is all about as I was preparing for this
      talk, so I went ahead and upgraded one of my free GitHub organizations to
      a team plan subscription to try it out. After upgrading and sending an
      email to the GitHub team to gain access, I was able to create and connect
      to a new Codespace through the UI. After installing and configuring the
      Codespaces extension, I was able to connect to it using my local VS Code
      instance and run my unit test suite in the cloud.
     -->
    <div
      id="codespaces-demo"
      class="step"
      data-rel-x="350"
      data-rel-y="0"
      data-rotate-z="-90"
      data-scale="0.75"
    >
      <video
        width="1920"
        height="1080"
        controls
        preload
      >
        <source src="videos/codespaces.webm" type="video/webm">
        <source src="videos/codespaces.mp4" type="video/mp4">
      </video>
    </div>

    <!-- 
      I was about to commit some changes in my Codespace when I realized that I
      like to sign my commits with PGP but didn't really feel comfortable
      uploading my private key to a container that I don't control. So I asked
      the director of engineering over Codespaces for a recommendation. Didn't
      hear back but I'll be curious to see how they go about solving this
      problem.
     -->
    <div
      id="key-tweet"
      class="step sub-slide"
      data-rel-x="900"
      data-rel-y="0"
      data-rotate-z="-90"
    >
      <blockquote class="twitter-tweet" data-dnt="true"><p lang="en" dir="ltr">Hi <a href="https://twitter.com/corywilkerson?ref_src=twsrc%5Etfw">@corywilkerson</a> 👋 Playing around with Codespaces today. For engineers who like to sign their commits, what&#39;s the recommended workflow for getting keys into a Codespace?</p>&mdash; Matt Swensen (@mjswensen) <a href="https://twitter.com/mjswensen/status/1439283175683870720?ref_src=twsrc%5Etfw">September 18, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

    <!-- 
      Codespaces has a different approach to the lifecycle and configuration of
      a remote development environment. At Rivet we use long-running
      environments that are really just like putting your laptop in the cloud.
      Codespaces are designed to be treated as temporary, akin to git branches.
      Both approaches are valid and can work well depending on your team and
      workflow.
     -->
    <div
      id="lifecycle"
      class="step sub-slide text"
      data-rel-x="600"
      data-rel-y="0"
      data-rotate-z="-90"
    >
      <h3 class="title">Remote environment lifecycle approaches</h3>
      <ul>
        <li>Ephemeral, throwaway environments</li>
      </ul>
      <ul>
        <li>Long-running environments per engineer</li>
      </ul>
    </div>

    <!-- Conclusion -->

    <!-- 
      If you are interested in trying out a remote environment, come work at
      Rivet! We have a couple of engineering slots open right now. If you want
      to chat about that, remote environments, JavaScript, or anything else,
      find me on Twitter.
     -->
    <div
      id="wrap-up"
      class="step slide"
      data-x="0"
      data-y="7000"
      data-z="5000"
      data-rotate-x="-30"
    >
      <h2>Next steps</h2>
      <div class="content">
        <p>Come enjoy a comfortable remote development environment at Rivet.</p>
        <p>Questions / want to chat? DM or tweet at @mjswensen.</p>
        <a
          href="https://www.rivethealth.com/careers"
          target="_blank"
        >
          {% qr https://www.rivethealth.com/careers %}
        </a>
        <a
          href="https://twitter.com/mjswensen"
          target="_blank"
        >
          {% qr https://twitter.com/mjswensen %}
        </a>
        <a
          href="https://www.rivethealth.com/careers"
          target="_blank"
        >
          rivethealth.com/careers
        </a>
        <a
          href="https://twitter.com/mjswensen"
          target="_blank"
        >
          twitter.com/mjswensen
        </a>
      </div>
    </div>
  </div>
  <script src="js/impress.js"></script>
  <script>
    const impressRoot = document.querySelector('#impress');
    impressRoot.addEventListener(
      'impress:stepenter',
      function({ target: currentStep }) {
        const video = currentStep.querySelector('video');
        if (video) {
          video.play();
        }
      }
    );

    impress().init();

    window.addEventListener('resize', evt => {
      console.log(`${window.innerWidth} x ${window.innerHeight}`);
    });
  </script>
</body>
</html>

<!-- 
  Video encoding notes
  --------------------

  Commands used:
  - ffmpeg -i [INPUT FILE] -vcodec libx264 -an [OUTPUT_FILE.mp4]
  - ffmpeg -i [INPUT FILE] -vcodec libvpx-vp9 -b:v 0 -crf 31 -pass 1 -an -f null /dev/null && ffmpeg -i [INPUT FILE] -vcodec libvpx-vp9 -b:v 0 -crf 31 -pass 2 -an [OUTPUT_FILE.webm]

  Helpful links:
  - https://caniuse.com/?search=video%20format
  - https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs
 -->
